# Arquitectura y Componentes Principales de NestJS

## Descripción General

NestJS es un framework progresivo de Node.js para construir aplicaciones backend eficientes y escalables. Basado en TypeScript, adopta conceptos de programación orientada a objetos, funcional y arquitectura modular. Sus componentes principales son: `main`, `modules`, `controllers` y `services`.

---

## 1. main.ts

**Descripción**  
Archivo de entrada que arranca la aplicación y configura el entorno inicial.

**Rol**

- Bootstrap de la aplicación con `NestFactory.create()`
- Configuración global (CORS, pipes, filtros, interceptores)
- Inicio del servidor HTTP

**Ejemplo:**

```ts
import { NestFactory } from "@nestjs/core";
import { AppModule } from "./app.module";

async function bootstrap() {
  const app = await NestFactory.create(AppModule);
  app.enableCors();
  await app.listen(3000);
}
bootstrap();
```

---

## 2. Módulos (Modules)

**Descripción**  
Agrupan componentes relacionados (controladores, servicios, etc.) proporcionando encapsulación lógica.

**Rol**

- Encapsulación de funcionalidades (usuarios, auth, etc.)
- Organización y reutilización del código
- Definidos con el decorador `@Module`
- Existe un módulo raíz (normalmente `AppModule`)

**Ejemplo:**

```ts
import { Module } from "@nestjs/common";
import { UsersController } from "./users.controller";
import { UsersService } from "./users.service";

@Module({
  controllers: [UsersController],
  providers: [UsersService],
  exports: [UsersService],
})
export class UsersModule {}
```

---

## 3. Controladores (Controllers)

**Descripción**  
Manejan solicitudes HTTP entrantes y devuelven respuestas. Actúan como capa de interfaz.

**Rol**

- Definición de rutas y métodos HTTP (`@Get()`, `@Post()`, etc.)
- Validación básica de entrada
- Delegación de lógica a servicios
- Envío de la respuesta al cliente

**Ejemplo:**

```ts
import { Controller, Get, Post, Body } from "@nestjs/common";
import { UsersService } from "./users.service";

@Controller("users")
export class UsersController {
  constructor(private readonly usersService: UsersService) {}

  @Get()
  findAll() {
    return this.usersService.findAll();
  }

  @Post()
  create(@Body() dto: any) {
    return this.usersService.create(dto);
  }
}
```

---

## 4. Servicios (Services)

**Descripción**  
Contienen la lógica de negocio. Ejecutan operaciones como acceso a base de datos, cálculos o integraciones.

**Rol**

- Implementación de la lógica de negocio principal
- Inyección de dependencias (`@Injectable()`)
- Interacción con repositorios o modelos (operaciones CRUD)
- Reutilización entre múltiples controladores u otros servicios

**Ejemplo:**

```ts
import { Injectable } from "@nestjs/common";

@Injectable()
export class UsersService {
  private users = [];

  findAll() {
    return this.users;
  }

  create(user: any) {
    this.users.push(user);
    return user;
  }
}
```

---

## Conclusión

- `main.ts`: inicializa la aplicación y configura aspectos globales.
- `Modules`: organizan y encapsulan funcionalidades.
- `Controllers`: manejan rutas y delegan lógica.
- `Services`: contienen la lógica de negocio e interactúan con datos.

Esta arquitectura modular hace que NestJS sea robusto, escalable y mantenible.
